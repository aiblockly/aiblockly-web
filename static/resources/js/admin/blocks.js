$(function(){var c=parseInt($("#pageIndex").text())-1,d=parseInt($("#pages").text())-1;0===c?$("#prev").parent().addClass("am-disabled"):$("#prev").parent().removeClass("am-disabled");d===c?$("#next").parent().addClass("am-disabled"):$("#next").parent().removeClass("am-disabled");$("#pageSizeSelect").on("change",function(){window.location.href=contextPath+"/admin/blocks?pageIndex="+c+"&pageSize="+$("#pageSizeSelect").val()});$("#prev").on("click",function(){var a=parseInt($("#pageIndex").text())-
1;a--;0>a&&(a=0);window.location.href=contextPath+"/admin/blocks?pageIndex="+a+"&pageSize="+$("#pageSizeSelect").val()});$("#next").on("click",function(){var a=parseInt($("#pageIndex").text())-1;a++;window.location.href=contextPath+"/admin/blocks?pageIndex="+a+"&pageSize="+$("#pageSizeSelect").val()});$("#addUserBut").on("click",function(){AMUI.dialog.confirm({title:"\u6dfb\u52a0\u7528\u6237",content:'<form id="addUserForm" class="am-form am-form-horizontal">\n                        <div class="am-form-group">\n                            <label for="name" class="am-u-sm-2 am-form-label">\u59d3\u540d<span style="color: #FF0000">*</span></label>\n                            <div class="am-u-sm-10">\n                                <input type="text" id="name" name="name" placeholder="\u8f93\u5165\u4f60\u7684\u59d3\u540d">\n                            </div>\n                        </div>\n            \n                        <div class="am-form-group">\n                            <label class="am-u-sm-2 am-form-label">\u6027\u522b</label>\n                            <div class="am-u-sm-10" style="display: -webkit-inline-box;">\n                                <div class="am-radio">\n                                    <label>\n                                        <input type="radio" name="gender" value="0" checked>\n                                        \u7537\n                                    </label>\n                                </div>\n            \n                                <div class="am-radio">\n                                    <label>\n                                        <input type="radio" name="gender" value="1">\n                                        \u5973\n                                    </label>\n                                </div>\n                            </div>\n                        </div>\n            \n                        <div class="am-form-group">\n                            <label for="email" class="am-u-sm-2 am-form-label">\u90ae\u7bb1</label>\n                            <div class="am-u-sm-10">\n                                <input type="email" id="email" name="email" placeholder="\u8f93\u5165\u4f60\u7684\u7535\u5b50\u90ae\u7bb1">\n                            </div>\n                        </div>\n            \n                        \n                        <div class="am-form-group">\n                            <label for="rolesSel" class="am-u-sm-2 am-form-label">\u6743\u9650</label>\n                            <div class="am-u-sm-10">\n                                <select id="rolesSel" name="roles">\n                                   <option value="normal" selected>\u666e\u901a\u7528\u6237</option>\n                                   <option value="admin">\u7ba1\u7406\u5458\u7528\u6237</option>\n                                </select>\n                            </div>\n                        </div>\n                        <div class="am-form-group">\n                            <label for="mob" class="am-u-sm-2 am-form-label">\u624b\u673a</label>\n                            <div class="am-u-sm-10">\n                                <input type="text" id="mob" name="mob" placeholder="\u8f93\u5165\u4f60\u7684\u624b\u673a\u53f7\u7801">\n                            </div>\n                        </div>\n            \n                        <div class="am-form-group">\n                            <label for="password" class="am-u-sm-2 am-form-label">\u5bc6\u7801</label>\n                            <div class="am-u-sm-10">\n                                <input type="password" id="password" name="password" placeholder="\u8f93\u5165\u4f60\u7684\u5bc6\u7801\uff0c\u9ed8\u8ba4\u5bc6\u7801 \'VIRobotics\'">\n                            </div>\n                        </div>\n            \n                        <div class="am-form-group">\n                            <label for="org" class="am-u-sm-2 am-form-label">\u7ec4\u7ec7</label>\n                            <div class="am-u-sm-10">\n                                <input type="text" id="org" name="org" placeholder="\u8f93\u5165\u4f60\u7684\u7ec4\u7ec7(\u5b66\u6821/\u5355\u4f4d)">\n                            </div>\n                        </div>\n                    </form>',
onConfirm:function(){var a=void 0,c=void 0,d=void 0,f=void 0,g=void 0,h=void 0,k=void 0;$("#addUserForm").serializeArray().forEach(function(b){switch(b.name){case "name":a=b.value;break;case "gender":c=b.value;break;case "email":d=b.value;break;case "roles":f=b.value;break;case "mob":g=b.value;break;case "password":h=b.value?b.value:"VIRobotics";break;case "org":k=b.value}});var e=a+";"+c+";"+d+";"+f+";"+g+";"+h+";"+k,l=new JSEncrypt;l.setKey($("#pk").text());e=l.encrypt(e);$.ajax(contextPath+"/admin/user/add",
{method:"post",data:{data:e},dataType:"json"}).then(function(a){a.data&&window.location.reload(!0)})},onCancel:function(){}})});$("#searchBut").on("click",function(){var a=$("#search").val();a?(a=contextPath+"/admin/blocks/search?q="+a,window.open(a,"_self")):AMUI.dialog.alert({title:"\u609f\u7a7a\u83ab\u95f9",content:"<p>\u4f60\u4e0d\u544a\u8bc9\u6211\u60f3\u641c\u7d22\u5565</p><p>\u90a3\u6211\u53ea\u80fd\u56de\u7b54\u65e0\u53ef\u5949\u544a\u4e86</p>",onConfirm:function(){}})})});
var remove=function(c,d){AMUI.dialog.confirm({title:"\u5220\u9664blocks "+d+" ",content:"\u662f\u5426\u8981\u5220\u9664\u8be5blocks\uff1f",onConfirm:function(){$("#rolesSel").val();$.ajax(contextPath+"/admin/blocks/delete",{method:"POST",data:{id:c},dataType:"json"}).then(function(a){a.data&&window.location.reload(!0)}).fail(function(){})},onCancel:function(){}})};
