$(function(){$("#registerBut").on("click",function(){var c=void 0,f=void 0,b=void 0,a=void 0,e=void 0,g=void 0,k=void 0;$("#registerForm").serializeArray().forEach(function(d){switch(d.name){case "name":c=d.value;break;case "gender":f=d.value;break;case "email":b=d.value;break;case "mob":a=d.value;break;case "password":e=d.value;break;case "code":g=d.value;break;case "org":k=d.value}});if(!/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(b))return AMUI.dialog.alert({title:'<span style="color:#FF0000;">\u63d0\u793a</span>',
content:"\u60a8\u586b\u5199\u7684Email\u4e0d\u6b63\u786e\uff0c\u8bf7\u586b\u5199\u6b63\u786e\u7684Email\u3002"}),!1;if(!/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[35678]|18[0-9]|14[57])[0-9]{8}$/.test(a))return AMUI.dialog.alert({title:'<span style="color:#FF0000;">\u63d0\u793a</span>',content:"\u60a8\u586b\u5199\u7684\u624b\u673a\u53f7\u7801\u4e0d\u6b63\u786e\uff0c\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801\u3002"}),!1;if(!/^\w+$/.test(e)||8>e.length)return AMUI.dialog.alert({title:'<span style="color:#FF0000;">\u63d0\u793a</span>',
content:"\u60a8\u586b\u5199\u7684\u5bc6\u7801\u4e0d\u7b26\u5408\u89c4\u8303\uff0c\u8bf7\u6309\u7167\u89c4\u8303\u586b\u5199\u5bc6\u7801\u3002"}),!1;if(!(c&&b&&a&&e&&g))return AMUI.dialog.alert({title:'<span style="color:#FF0000;">\u63d0\u793a</span>',content:'\u8bf7\u586b\u5199\u5e26<span style="color: #FF0000">*</span>\u5fc5\u586b\u5b57\u6bb5\uff01'}),!1;var h=c+";"+f+";"+b+";"+a+";"+e+";"+g+";"+k,l=new JSEncrypt;l.setKey($("#pk").text());h=l.encrypt(h);$.ajax(contextPath+"/register/do",{method:"post",
dataType:"json",data:{data:h}}).then(function(a){a.data?AMUI.dialog.alert({title:'<span style="color:#FF0000;">\u8b66\u544a</span>',content:"\u606d\u559c\u60a8\uff0c\u5df2\u7ecf\u6ce8\u518c\u6210\u529f\uff0c\u70b9\u51fb\u786e\u5b9a\u524d\u5f80\u767b\u5f55\u9875\u9762\uff01",onConfirm:function(){window.location.href=contextPath+"/login"}}):AMUI.dialog.alert({title:'<span style="color:#FF0000;">\u8b66\u544a</span>',content:"\u6ce8\u518c\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u6ce8\u518c\uff01"})}).fail(function(){AMUI.dialog.alert({title:'<span style="color:#FF0000;">\u8b66\u544a</span>',
content:"\u6ce8\u518c\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u6ce8\u518c\uff01"})});return!1});$("#getVerificationCodeBut").on("click",function(){var c=void 0,f=$("#token").text();$("#registerForm").serializeArray().forEach(function(a){"mob"===a.name&&(c=a.value)});if(!c&&!/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[35678]|18[0-9]|14[57])[0-9]{8}$/.test(c))return AMUI.dialog.alert({title:'<span style="color:#FF0000;">\u63d0\u793a</span>',content:"\u60a8\u586b\u5199\u7684\u624b\u673a\u53f7\u7801\u4e0d\u6b63\u786e\uff01"}),
!1;var b=new JSEncrypt;b.setKey($("#pk").text());b=b.encrypt(c);$.ajax(contextPath+"/register/code",{method:"post",dataType:"json",data:{data:b,token:f}}).then(function(a){a.data?AMUI.dialog.alert({title:"\u63d0\u793a",content:'\u53d1\u9001\u52a8\u6001\u5bc6\u7801\u6210\u529f!<span style="color: #FF0000;">\u8bf7\u8bb0\u4f4f\u672c\u6b21\u52a8\u6001\u5bc6\u7801\uff0c\u53ef\u7528\u4e8e\u767b\u5f55\u4f7f\u7528\u3002</span>'}):AMUI.dialog.alert({title:'<span style="color:#FF0000;">\u8b66\u544a</span>',
content:a.msg})}).fail(function(){AMUI.dialog.alert({title:'<span style="color:#FF0000;">\u8b66\u544a</span>',content:"\u83b7\u53d6\u9a8c\u8bc1\u7801\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u83b7\u53d6\uff01"})});return!1})});
